<include file="./Public/html/header.html" />
<style type="text/css">
<!--
body{font-size:12px;}.l-table-edit-td{padding:10px 20px;}.l-table-edit-td input{width:130px;}.l-button-submit,.l-button-test{width:80px;float:left;margin-left:10px;padding-bottom:2px;}.l-verify-tip{left:230px;top:120px;}.l-table-edit tr td span{color:#f30;padding-left:5px;}.tipmsg{color:#f30;}
-->
</style>
<table cellpadding="0" cellspacing="0" class="l-table-edit">
    <tr>
        <td align="right" class="l-table-edit-td">
            <span>*</span>用户等级：
        </td>
        <td align="left" class="l-table-edit-td">
            <input type="text" id="level" value="<{$level['level']}>" />
        </td>
        <td align="left" class="tipmsg"></td>
    </tr>
</table>
<script type="text/javascript">
//<![CDATA[
$(function() {
    $("#level").focus(function() {
        addTip($(this).parent('td').next('td:last'), '用户等级不能为空，只能填写1-5之间的整数');
    }).blur(function() {
        removeTip($(this).parent('td').next('td:last'));
        ckLevel();
    });
});

//添加提示
function addTip(my, tip) {
    removeTip(my);
    var tip1 = '<div class="tip_msg">';
    var tip2 = '</div>';
    my.append(tip1 + tip + tip2);
}

//删除提示
function removeTip(my) {
    my.find(".tip_msg").remove();
}

//检测用户等级
function ckLevel() {
    var level = $.trim($("#level").val());
    if (level.length <= 0) {
        addTip($("#level").parent('td').next('td:last'), '用户等级不能为空');
        return false;
    }
    if (Number(level) <= 0 || Number(level) > 5) {
        addTip($("#level").parent('td').next('td:last'), '用户等级只能填写1-5之间的整数');
        return false;
    }
    return true;
}

//检测表单 
function checkForm() {
    if (!ckLevel()) return false;
    var level = $.trim($("#level").val());
    return {
        level: level
    };
}

//提交表单
function setLevelFormSubmit() {
    if (checkForm()) {
        $.post('<{:U("Member/setLevel")}>/id/<{$member["id"]}>', checkForm(), function(data) {
            window.parent.setLevelCallback(data);
        }, 'json');
    }
}
//]]>
</script>
<include file="./Public/html/footer.html" />